package:
  name: cil-astra
  version: {{ environ.get('GIT_DESCRIBE_TAG','v')[1:] }}

source:
  path: ../../../

build:
  preserve_egg_dir: False 
  number: {{ GIT_DESCRIBE_NUMBER }}
  
test:
  source_files:
    - ./Wrappers/Python/test # [win]
    - ./ccpi/test # [not win]

  commands:
    - python -c "import os; print ('TESTING IN THIS DIRECTORY' , os.getcwd())"
    - python -m unittest discover Wrappers/Python/test # [win]
    - python -m unittest discover -s ccpi/test # [not win]
    
requirements:
  build:
    - python {{ python }}
  run:
    - python {{ python }}
    - numpy >=1.16
    - cil >=21.1
    - astra-toolbox=1.9.9
    # the minimal version of cudatoolkit that satisfies astra-toolbox binary
    # and runs on all recent cuda runtime drivers
    - cudatoolkit>=9.0
	
about:
  home: http://www.ccpi.ac.uk/cil
  license:  GPLv3
  summary: 'Astra-Toolbox wrappers for CCPi CIL'
